<!DOCTYPE html>

  <html lang="">

<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  	<meta property="og:title" content=" inception.js &middot;  Jon Gomez Blog" />
  	<meta property="og:site_name" content="Jon Gomez Blog" />
  	<meta property="og:url" content="https://jongomez.github.io/post/inceptionjs/" />

    
  	<meta property="og:type" content="article" />

    <meta property="og:article:published_time" content="2016-10-14T12:04:47&#43;01:00" />

    
    <meta property="og:article:tag" content="JavaScript" />
    
    

  <title>
     inception.js &middot;  Jon Gomez Blog
  </title>

    <meta name="description" content="Blog" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />



    <link rel="stylesheet" type="text/css" href="https://jongomez.github.io/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="https://jongomez.github.io/css/nav.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400|Inconsolata" />


    
      
          <link href="https://jongomez.github.io/index.xml" rel="alternate" type="application/rss+xml" title="Jon Gomez Blog" />
      
      
    
    <meta name="generator" content="Hugo 0.17" />

    <link rel="canonical" href="https://jongomez.github.io/post/inceptionjs/" />

    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-83420808-1', 'auto');
      ga('send', 'pageview');

    </script>
    

    
</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" id="nav-close" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://jongomez.github.io/">Blog</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://github.com/jongomez">Github</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="https://jongomez.github.io/about/">About</a>
            </li>
        
    </ul>
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">




  
    
      <header class="main-header post-head" style="background-image: url(https://jongomez.github.io/media/inceptionjs/inception.png)">
    
  
  <nav class="main-nav overlay clearfix">


  
          
          <div id="menu-icon-wrapper" class="menu-icon-wrapper">
              
              <svg width="100px" height="100px">
                  <path stroke="white" id="pathA" d="M 30 40 L 70 40 C 90 40 90 75 60 85 A 40 40 0 0 1 20 20 L 80 80"/>
                  <path stroke="white" id="pathB" d="M 30 50 L 70 50"/>
                  <path stroke="white" id="pathC" d="M 70 60 L 30 60 C 10 60 10 20 40 15 A 40 38 0 1 1 20 80 L 80 20"/>
              </svg>
              
              <button id="menu-icon-trigger" class="menu-icon-trigger"></button>
          </div>
  
  </nav>


 <div class="vertical">
        <div class="main-header-content inner">


  <h1 style="text-shadow: 2px 2px #000000;" class="page-title">inception.js</h1>
  <h2 style="text-shadow: 1px 1px #000000;" class="page-description">Websites within websites</h2>




      </div>
  </div>


    <a id="sauss" style="color: " href="">
      
    </a>

</header>



<main class="content" role="main">


  <article class="post post">

    <header class="post-header">

        <h1 class="post-title">inception.js</h1>


        <small></small>

        <section class="post-meta">
        
          <time class="post-date" datetime="2016-10-14T12:04:47&#43;01:00">
            Oct 14, 2016
          </time>
        
         
          <span class="post-tag small"><a href="https://jongomez.github.io/tags/javascript/">#JavaScript</a></span>
         
        </section>
    </header>

    <section class="post-content">
      

<br/>


<p>You can do a lot of crazy stuff with JavaScript. But can you re-render a website inside an iframe inside that same website? You know, something like this:</p>

<p>
<figure >
    <a href="http://www.pxleyes.com/photoshop-picture/4db84f8644924/droste-effect-laptop.html">
        <img src="https://jongomez.github.io/media/inceptionjs/example1.jpg" />
    </a>
    
</figure>

<p  class="legend">

Something like this, but with the current website inside the laptop. <a href="http://www.pxleyes.com/photoshop-picture/4db84f8644924/droste-effect-laptop.html">Photo Source.</a>

</p>
</p>

<p>Don&rsquo;t know why I thought of this, but the idea started to grow on me. I knew it could be done. I knew it would look trippy. So I decided to bring the idea to life.</p>

<p><em>&ldquo;What is the most resilient parasite? Bacteria? A virus? An intestinal worm? An idea. Resilient&hellip; highly contagious. Once an idea has taken hold of the brain it&rsquo;s almost impossible to eradicate. An idea that is fully formed - fully understood - that sticks; right in there somewhere.&rdquo;</em> <strong>- Cobb</strong> <em>(Leonardo DiCaprio in Inception)</em></p>

<p>Found out there&rsquo;s a name for this kind of effect - <a href="https://en.wikipedia.org/wiki/Droste_effect">Droste effect.</a></p>

<p>
<figure >
    
        <img src="https://jongomez.github.io/media/inceptionjs/Droste.jpg" />
    
    
</figure>

<p  class="legend">

The Droste Effect.

</p>
</p>

<p>How would one create such an effect using JavaScript? My first approach was to take a screenshot of the current website, and just put it on display inside the mockup photo. I tried out a few libraries that take screenshots of the current page <a href="https://github.com/niklasvh/feedback.js">(like this one)</a>, but I could never get them to work 100%.</p>

<p>My next approach was to insert iframes inside the mockup photos. This turned out to be more feasible, and after working on this approach for a while I decided to turn it into a small JavaScript library - inception.js. Here&rsquo;s a quick demo:</p>

<h3 id="basic-example">Basic example</h3>

<p>Lets say we have a container div, and want to insert the current page inside it. Using inception.js, all we need to do is:</p>

<div class="highlight" style="background: #202020"><pre style="line-height: 125%;"><span></span><span style="color: #d0d0d0">inception1</span> <span style="color: #d0d0d0">=</span> <span style="color: #6ab825; font-weight: bold">new</span> <span style="color: #d0d0d0">Inception({</span>
  <span style="color: #d0d0d0">parentElementId:</span> <span style="color: #ed9d13">&quot;iframeContainer1&quot;</span><span style="color: #d0d0d0">,</span> 
  <span style="color: #d0d0d0">levels:</span> <span style="color: #3677a9">3</span>
<span style="color: #d0d0d0">})</span>
</pre></div>


<p>And the result is:</p>

<div id="iframeContainer1" style="height:400px; border-style: solid; border-width: 8px;"></div>

<br/>


<p><a href="https://codepen.io/jonGomez/full/xROgqO/">Check it out on Codepen.</a></p>

<p>That&rsquo;s it. The number of nested iframes is set by the &lsquo;levels&rsquo; parameter.</p>

<p>Okay I lied. The code I used was little bit different. If you manage to scroll down inside those iframes, you&rsquo;ll see there are no disqus comments at the end of the iframes. I didn&rsquo;t include them because I always get nasty errors when using disqus stuff. I didn&rsquo;t want those errors to occur again inside the iframes, so I removed all the disqus stuff from the iframes. To do this, I added a class called <em>&ldquo;disqus_stuff&rdquo;</em> to all the disqus script elements, and added <em>&lsquo;classesToRemove: &ldquo;disqus_stuff&rdquo;&rsquo;</em> to the Inception constructor call.</p>

<div class="highlight" style="background: #202020"><pre style="line-height: 125%;"><span></span><span style="color: #d0d0d0">inception1</span> <span style="color: #d0d0d0">=</span> <span style="color: #6ab825; font-weight: bold">new</span> <span style="color: #d0d0d0">Inception({</span>
  <span style="color: #d0d0d0">parentElementId:</span> <span style="color: #ed9d13">&quot;iframeContainer1&quot;</span><span style="color: #d0d0d0">,</span> 
  <span style="color: #d0d0d0">levels:</span> <span style="color: #3677a9">4</span><span style="color: #d0d0d0">,</span> 
  <span style="color: #d0d0d0">classesToRemove:</span> <span style="color: #ed9d13">&quot;disqus_stuff&quot;</span>
<span style="color: #d0d0d0">})</span>
</pre></div>


<p>But that&rsquo;s a pretty bare bones example. To recreate the droste effect in a mockup photo, we need a mockup photo, and some way to insert our iframes on top of that photo.</p>

<p><div><img id="img1" src="https://jongomez.github.io/media/inceptionjs/2.jpg" style="width: 100%"></div>
<p  class="legend">
Mockup photo downloaded from <a href="http://magicmockups.com/">Magic Mockups</a>
</p>
</p>

<p>The code to recreate this example is</p>

<div class="highlight" style="background: #202020"><pre style="line-height: 125%;"><span></span><span style="color: #d0d0d0">inception2</span> <span style="color: #d0d0d0">=</span> <span style="color: #6ab825; font-weight: bold">new</span> <span style="color: #d0d0d0">Inception({</span>
  <span style="color: #d0d0d0">imageId:</span> <span style="color: #ed9d13">&quot;img1&quot;</span><span style="color: #d0d0d0">,</span> 
  <span style="color: #d0d0d0">levels:</span> <span style="color: #3677a9">2</span><span style="color: #d0d0d0">,</span> 

  <span style="color: #d0d0d0">width:</span> <span style="color: #ed9d13">&quot;60%&quot;</span><span style="color: #d0d0d0">,</span>
  <span style="color: #d0d0d0">height:</span> <span style="color: #ed9d13">&quot;56%&quot;</span><span style="color: #d0d0d0">,</span>
  <span style="color: #d0d0d0">top:</span> <span style="color: #ed9d13">&quot;25%&quot;</span><span style="color: #d0d0d0">,</span>
  <span style="color: #d0d0d0">left:</span> <span style="color: #ed9d13">&quot;10%&quot;</span><span style="color: #d0d0d0">,</span>
  <span style="color: #d0d0d0">rotate:</span> <span style="color: #ed9d13">&quot;5deg&quot;</span><span style="color: #d0d0d0">,</span>

  <span style="color: #d0d0d0">classesToRemove:</span> <span style="color: #ed9d13">&quot;disqus_stuff&quot;</span><span style="color: #d0d0d0">,</span>
  <span style="color: #d0d0d0">matchWidthElementId:</span> <span style="color: #ed9d13">&quot;img1&quot;</span><span style="color: #d0d0d0">,</span>
  <span style="color: #d0d0d0">leftAlignWith:</span> <span style="color: #ed9d13">&quot;img1&quot;</span>
<span style="color: #d0d0d0">}</span>
</pre></div>


<p><a href="https://codepen.io/jonGomez/full/xRgRQa">Check it out on Codepen.</a></p>

<p>The only difficult part here is getting the width, height, top, left and rotate values for things to work (i.e. positioning the iframes inside the mockup image). <a href="http://codepen.io/jonGomez/full/YGOdPE/">But don&rsquo;t worry, I got you covered. I made a codepen where you can get all the necessary values to set everything up.</a></p>

<p>What if the screen on the mockup image is tilted in a weird way? Or the screen is not directly facing forward? <a href="http://franklinta.com/2014/09/08/computing-css-matrix3d-transforms/">Franklin Ta has already solved that problem for us.</a> He used matrix3d transforms to place anything inside such screens.</p>

<p>Theoretically, you could always use a matrix3d to place anything on top of mockup images (instead of specifying width, rotation, etc&hellip;), but I&rsquo;d reccomend against using matrix3d&rsquo;s if you can. Code will look cleaner, it&rsquo;s easier to set up correctly, and in my experience, the browser has a hard time computing matrix3d transforms.</p>

<p>Here&rsquo;s and example with matrix3d:
<div id="great-grandparent"><img id="img2" src="https://jongomez.github.io/media/inceptionjs/3.jpg"></div>
<p  class="legend">
Mockup photo downloaded from <a href="http://magicmockups.com/">Magic Mockups</a>
</p>
</p>

<p>Code:</p>

<div class="highlight" style="background: #202020"><pre style="line-height: 125%;"><span></span><span style="color: #d0d0d0">inception3</span> <span style="color: #d0d0d0">=</span> <span style="color: #6ab825; font-weight: bold">new</span> <span style="color: #d0d0d0">Inception({</span>
  <span style="color: #d0d0d0">imageId:</span> <span style="color: #ed9d13">&quot;img2&quot;</span><span style="color: #d0d0d0">,</span> 
  <span style="color: #d0d0d0">levels:</span> <span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> 

  <span style="color: #d0d0d0">matrix3d:</span> <span style="color: #ed9d13">&quot;matrix3d(0.326055, ...)&quot;</span><span style="color: #d0d0d0">,</span>
  <span style="color: #d0d0d0">imageWidth:</span> <span style="color: #ed9d13">&quot;960px&quot;</span><span style="color: #d0d0d0">,</span>
  <span style="color: #d0d0d0">imageHeight:</span> <span style="color: #ed9d13">&quot;640px&quot;</span><span style="color: #d0d0d0">,</span>

  <span style="color: #d0d0d0">classesToRemove:</span> <span style="color: #d0d0d0">[</span><span style="color: #ed9d13">&quot;disqus_stuff&quot;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&quot;nav&quot;</span><span style="color: #d0d0d0">],</span>
  <span style="color: #d0d0d0">matchWidthElementId:</span> <span style="color: #ed9d13">&quot;img2&quot;</span><span style="color: #d0d0d0">,</span>
  <span style="color: #d0d0d0">leftAlignWith:</span> <span style="color: #ed9d13">&quot;img2&quot;</span><span style="color: #d0d0d0">,</span>
<span style="color: #d0d0d0">}</span>
</pre></div>


<p><a href="https://codepen.io/jonGomez/full/WoRRep/">Codepen.</a></p>

<p>Again, the hard part here is getting the correct matrix3d values for your mockup image. <a href="http://codepen.io/jonGomez/full/yaRgjG">I&rsquo;ve forked Franklin Ta&rsquo;s codepen and modified it slightly to facilitate usage with mockup images.</a></p>

<p>Finally, I&rsquo;d like to say that getting this to run on every page can be a real challenge. Certain things will not work. For example, 3D translations may screw up the z-index of some elements, and certain elements inside the iframes will not render (on Chrome, Firefox works fine?). Not only that, I haven&rsquo;t done anything to optimize the code. It&rsquo;s a mess. Seriously. If you open Chrome&rsquo;s dev console and run an audit you&rsquo;ll see what I mean.</p>

<p>Looks pretty tight though. <a href="https://github.com/jongomez/inception.js">More on Github.</a></p>

    </section>


  <footer class="post-footer">


    

    





<section class="author">
  <h4><a href="https://jongomez.github.io/">Jon Gomez</a></h4>
  
  <p>Read <a href="https://jongomez.github.io/">more posts</a> by this author.</p>
  
  <div class="author-meta">
    <span class="author-location icon-location">Portugal</span>
    <span class="author-link icon-link"><a href="http://jongomez.github.io">http://jongomez.github.io</a></span>
  </div>
</section>



    
<section class="share">
  <h4>Share this post</h4>
  <a class="icon-twitter" style="font-size: 1.4em" href="https://twitter.com/share?text=inception.js&nbsp;-&nbsp;Jon%20Gomez%20Blog&amp;url=https%3a%2f%2fjongomez.github.io%2fpost%2finceptionjs%2f"
      onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
      <span class="hidden">Twitter</span>
  </a>
  <a class="icon-facebook" style="font-size: 1.4em" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fjongomez.github.io%2fpost%2finceptionjs%2f"
      onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
      <span class="hidden">Facebook</span>
  </a>
  <a class="icon-google-plus" style="font-size: 1.4em" href="https://plus.google.com/share?url=https%3a%2f%2fjongomez.github.io%2fpost%2finceptionjs%2f"
     onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
      <span class="hidden">Google+</span>
  </a>
</section>



    

<div id="disqus_thread" class="disqus_stuff"></div>
<script type="text/javascript" class="disqus_stuff">
  var disqus_shortname = 'jon-gomez-blog';
  var disqus_url = 'https:\/\/jongomez.github.io\/post\/inceptionjs\/';
  (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript'; dsq.async = true;
    dsq.className = "disqus_stuff";
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>




  </footer>

</article>

</main>
    


    <footer class="site-footer clearfix">
        <section class="copyright"><a href="https://jongomez.github.io/">Jon Gomez Blog</a> </section>
        
    </footer>




    </div>
    <script type="text/javascript" src="https://jongomez.github.io/js/jquery.js"></script>
    <script type="text/javascript" src="https://jongomez.github.io/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://jongomez.github.io/js/d3-ease.v1.min.js"></script>
    <script type="text/javascript" src="https://jongomez.github.io/js/segment.js"></script>
    <script type="text/javascript" src="https://jongomez.github.io/js/index.js"></script>




    
      <script type="text/javascript" src="https://jongomez.github.io/js/inceptionjs/inception.js"></script>
    
      <script type="text/javascript" src="https://jongomez.github.io/js/inceptionjs/inceptionjs_post.js"></script>
    









    
</body>
</html>

